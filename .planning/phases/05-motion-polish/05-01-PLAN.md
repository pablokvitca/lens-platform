---
phase: 05-motion-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - web_frontend/src/styles/globals.css
  - web_frontend/src/components/module/ModuleDrawer.tsx
  - web_frontend/src/components/nav/MobileMenu.tsx
  - web_frontend/src/components/nav/BottomNav.tsx
autonomous: true

must_haves:
  truths:
    - "Drawers animate with spring physics (slight overshoot, settle)"
    - "Interactive elements scale down on touch press"
    - "Animations respect prefers-reduced-motion"
  artifacts:
    - path: "web_frontend/src/styles/globals.css"
      provides: "Spring easing CSS variables, touch feedback utility, reduced-motion queries"
      contains: "--ease-spring"
    - path: "web_frontend/src/components/module/ModuleDrawer.tsx"
      provides: "Drawer with spring animation"
      contains: "ease-spring"
    - path: "web_frontend/src/components/nav/MobileMenu.tsx"
      provides: "Menu with choreographed entrance (backdrop leads)"
      contains: "ease-spring"
    - path: "web_frontend/src/components/nav/BottomNav.tsx"
      provides: "Touch feedback on nav items"
      contains: "active:scale"
  key_links:
    - from: "ModuleDrawer.tsx"
      to: "globals.css"
      via: "CSS variable consumption"
      pattern: "ease-spring|duration-300"
    - from: "MobileMenu.tsx"
      to: "globals.css"
      via: "CSS variable consumption"
      pattern: "ease-spring|duration-300"
---

<objective>
Add spring physics animations to drawers and touch feedback to interactive elements.

Purpose: Elevate mobile experience from functional to polished with iOS-like motion
Output: Drawers animate with bounce/settle, buttons/nav respond to touch with scale feedback
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-motion-polish/05-CONTEXT.md
@.planning/phases/05-motion-polish/05-RESEARCH.md
@web_frontend/src/styles/globals.css
@web_frontend/src/components/module/ModuleDrawer.tsx
@web_frontend/src/components/nav/MobileMenu.tsx
@web_frontend/src/components/nav/BottomNav.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add CSS motion system</name>
  <files>web_frontend/src/styles/globals.css</files>
  <action>
Add motion system CSS variables and utilities to globals.css:

1. Add spring easing variable using CSS `linear()` function (per RESEARCH.md):
```css
:root {
  /* Spring easing - slight overshoot and settle */
  --ease-spring: linear(
    0, 0.006, 0.025 2.8%, 0.101 6.1%, 0.539 18.9%, 0.721 25.3%, 0.849 31.5%,
    0.937 38.1%, 0.968 41.8%, 0.991 45.7%, 1.006 50%, 1.015 55%, 1.017 63.9%,
    1.014 73.1%, 1.007 85.5%, 1
  );
  /* Back easing for subtle overshoot */
  --ease-out-back: cubic-bezier(0.34, 1.56, 0.64, 1);
}
```

2. Add reduced-motion media query at end of file:
```css
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}
```

3. Add touch feedback utility in @layer base (after cursor rules):
```css
/* Touch feedback - scale down on press */
.touch-active:active {
  transform: scale(0.97);
}
```

Do NOT modify existing animations (mic-pulse, fadeIn) or ToC styles.
  </action>
  <verify>
Verify globals.css contains:
- `--ease-spring` CSS variable with `linear()` function
- `--ease-out-back` CSS variable
- `prefers-reduced-motion` media query
- `.touch-active:active` rule
  </verify>
  <done>CSS motion system available for consumption by drawer components</done>
</task>

<task type="auto">
  <name>Task 2: Update drawer animations with spring physics</name>
  <files>web_frontend/src/components/module/ModuleDrawer.tsx, web_frontend/src/components/nav/MobileMenu.tsx</files>
  <action>
Update both drawer components to use spring easing:

**ModuleDrawer.tsx:**
1. Update drawer panel transition from `duration-200` to `duration-300` and add spring easing:
   - Change: `transition-transform duration-200`
   - To: `transition-transform duration-300 [transition-timing-function:var(--ease-spring)]`

2. Update backdrop transition from `duration-200` to `duration-300`:
   - Change: `transition-opacity duration-200`
   - To: `transition-opacity duration-300`

**MobileMenu.tsx:**
1. Update menu panel transition to use spring easing:
   - Change: `transition-transform duration-300 ease-out`
   - To: `transition-transform duration-300 [transition-timing-function:var(--ease-spring)]`

2. Backdrop already has `duration-300` - keep it (choreography: backdrop and drawer move together, spring gives drawer slight overshoot)

The arbitrary value syntax `[transition-timing-function:var(--ease-spring)]` is Tailwind v4 compatible for custom CSS variables.
  </action>
  <verify>
1. Open mobile view in browser
2. Open/close ModuleDrawer (via floating button on left)
3. Open/close MobileMenu (via hamburger in header)
4. Confirm drawers have slight bounce/overshoot when opening
5. Confirm animations are smooth (no jank)
  </verify>
  <done>Drawers animate with spring physics - slight overshoot on open, smooth settle</done>
</task>

<task type="auto">
  <name>Task 3: Apply touch feedback to interactive elements</name>
  <files>web_frontend/src/components/nav/BottomNav.tsx, web_frontend/src/components/nav/MobileMenu.tsx, web_frontend/src/components/module/ModuleDrawer.tsx</files>
  <action>
Add touch feedback to navigation items using CSS :active scale:

**BottomNav.tsx - NavItem component:**
Add `active:scale-[0.97]` to the anchor element className (alongside existing `transition-colors`):
```tsx
className={`
  min-h-[44px] min-w-[44px] flex flex-col items-center justify-center gap-0.5
  transition-all duration-200 active:scale-[0.97]
  ${isActive ? "text-blue-600" : "text-slate-500 hover:text-slate-700"}
`}
```
Change `transition-colors` to `transition-all` to include transform.

**MobileMenu.tsx - Navigation links:**
Add touch feedback to the Course link and close button:
1. Course link: Add `active:scale-[0.97] transition-transform` to className
2. Close button: Add `active:scale-95` to className

**ModuleDrawer.tsx:**
1. Floating toggle button: Add `active:scale-95` alongside existing `transition-colors` (change to `transition-all`)
2. Close button in header: Add `active:scale-95` alongside existing `transition-colors` (change to `transition-all`)

Use `scale-95` (5%) for buttons and `scale-[0.97]` (3%) for larger nav items - smaller elements need more visible feedback.
  </action>
  <verify>
1. Open mobile view
2. Tap and hold BottomNav items - should scale down immediately
3. Tap and hold MobileMenu links - should scale down
4. Tap and hold drawer toggle/close buttons - should scale down
5. Verify feedback is immediate (no perceptible delay)
  </verify>
  <done>All navigation elements provide immediate visual feedback on touch</done>
</task>

</tasks>

<verification>
1. Drawer spring animation: Open ModuleDrawer and MobileMenu - both should have slight bounce on open
2. Touch feedback: Tap any nav item, button - should scale down immediately on press
3. Reduced motion: Set `prefers-reduced-motion: reduce` in browser dev tools - animations should be disabled
4. No regressions: All existing drawer functionality (open, close, escape key, backdrop click) works
</verification>

<success_criteria>
- Drawers open with spring physics (visible overshoot/settle)
- Interactive elements scale on touch (immediate visual response)
- Animations disabled when user prefers reduced motion
- No jarring cuts or lag in any animation
</success_criteria>

<output>
After completion, create `.planning/phases/05-motion-polish/05-01-SUMMARY.md`
</output>
