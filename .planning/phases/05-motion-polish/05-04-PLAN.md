---
phase: 05-motion-polish
plan: 04
type: execute
wave: 1
depends_on: []
files_modified:
  - web_frontend/src/pages/_spa/+Page.tsx
  - web_frontend/src/views/Facilitator.tsx
  - web_frontend/src/views/Availability.tsx
  - web_frontend/src/views/CourseOverview.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "All loading states use Skeleton components instead of 'Loading...' text"
    - "Course module list items use stagger animation on load"
  artifacts:
    - path: "web_frontend/src/pages/_spa/+Page.tsx"
      provides: "Skeleton loading state for SPA fallback"
      contains: "Skeleton"
    - path: "web_frontend/src/views/Facilitator.tsx"
      provides: "Skeleton loading states for facilitator views"
      contains: "Skeleton"
    - path: "web_frontend/src/views/Availability.tsx"
      provides: "Skeleton loading state for availability view"
      contains: "Skeleton"
    - path: "web_frontend/src/views/CourseOverview.tsx"
      provides: "Stagger animation on module list"
      contains: "stagger-item"
  key_links:
    - from: "Loading views"
      to: "Skeleton.tsx"
      via: "Import and render"
      pattern: "import.*Skeleton"
    - from: "CourseOverview module list"
      to: "globals.css stagger animation"
      via: "stagger-item class"
      pattern: "stagger-item"
---

<objective>
Replace remaining "Loading..." text states with Skeleton components and apply stagger animation to content lists.

Purpose: Close Gap 2 (incomplete skeleton loading) and Gap 3 (unused stagger animation) from verification.
Output: Polished loading states across all views and content reveals that feel connected.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-motion-polish/05-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Replace SPA fallback loading text</name>
  <files>web_frontend/src/pages/_spa/+Page.tsx</files>
  <action>
Import and use Skeleton component for the SPA fallback page:

1. Import Skeleton: `import { Skeleton } from "../../components/Skeleton";`
2. Replace the `<div className="animate-pulse text-gray-500">Loading...</div>` with a centered Skeleton:

```tsx
<div className="flex flex-col items-center gap-4">
  <Skeleton variant="circular" className="w-12 h-12" />
  <Skeleton variant="text" className="w-32 h-4" />
</div>
```

This provides a visual placeholder that matches the app's loading aesthetic.
  </action>
  <verify>grep -n "Skeleton" web_frontend/src/pages/_spa/+Page.tsx shows import and usage</verify>
  <done>SPA fallback shows skeleton instead of text</done>
</task>

<task type="auto">
  <name>Task 2: Replace Facilitator view loading states</name>
  <files>web_frontend/src/views/Facilitator.tsx</files>
  <action>
Import Skeleton and replace both "Loading..." instances:

1. Add import at top: `import { Skeleton, SkeletonText } from "../components/Skeleton";`

2. **Line ~148** (first loading state): Replace `<div className="text-gray-500">Loading...</div>` with:
```tsx
<div className="space-y-4">
  <Skeleton variant="rectangular" className="h-8 w-48" />
  <SkeletonText lines={3} />
</div>
```

3. **Line ~339** (second loading state in card): Replace `<div className="bg-white px-6 py-4 rounded shadow">Loading...</div>` with:
```tsx
<div className="bg-white px-6 py-4 rounded shadow space-y-3">
  <Skeleton variant="text" className="h-6 w-32" />
  <SkeletonText lines={2} />
</div>
```
  </action>
  <verify>grep -n "Loading\.\.\." web_frontend/src/views/Facilitator.tsx returns no matches</verify>
  <done>Facilitator view shows skeletons during loading</done>
</task>

<task type="auto">
  <name>Task 3: Replace Availability view loading and add stagger to CourseOverview</name>
  <files>web_frontend/src/views/Availability.tsx, web_frontend/src/views/CourseOverview.tsx</files>
  <action>
**Availability.tsx:**
1. Import Skeleton: `import { Skeleton, SkeletonText } from "../components/Skeleton";`
2. Replace `<div className="text-gray-600">Loading...</div>` (~line 70) with:
```tsx
<div className="space-y-4">
  <Skeleton variant="rectangular" className="h-10 w-64" />
  <SkeletonText lines={2} />
</div>
```

**CourseOverview.tsx:**
Apply stagger animation to module list items (the existing module cards):
1. Find the map that renders module cards (should be in the module list section after loading check)
2. Add stagger classes to each module card wrapper:
```tsx
<div
  key={module.id}
  className={`stagger-item stagger-delay-${Math.min(index + 1, 5)}`}
>
  {/* existing card content */}
</div>
```

This uses the existing CSS stagger animation (globals.css lines 122-143) with delays capped at 250ms (5 items).
  </action>
  <verify>
- grep -n "Loading\.\.\." web_frontend/src/views/Availability.tsx returns no matches
- grep -n "stagger-item" web_frontend/src/views/CourseOverview.tsx shows usage
  </verify>
  <done>Availability shows skeleton, CourseOverview modules stagger in</done>
</task>

</tasks>

<verification>
1. No "Loading..." text remains: `grep -r "Loading\.\.\." web_frontend/src/views/ web_frontend/src/pages/` returns empty
2. Stagger animation used: `grep -r "stagger-item" web_frontend/src/` shows CourseOverview usage
3. Build passes: `cd web_frontend && npm run build`
</verification>

<success_criteria>
- MOTION-04 requirement satisfied: Staggered reveals when loading content lists
- VISUAL-03 requirement satisfied: Loading states match desktop aesthetic (skeletons)
- Verification Truth #5 passes: "Loading states display correctly on mobile"
- No dead CSS code - stagger animation now actually used
</success_criteria>

<output>
After completion, create `.planning/phases/05-motion-polish/05-04-SUMMARY.md`
</output>
