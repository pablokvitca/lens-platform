---
phase: 01-foundation-typography
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - web_frontend/src/components/MobileWarning.tsx
  - web_frontend/src/components/GlobalComponents.tsx
  - web_frontend/src/pages/+Head.tsx
  - web_frontend/src/styles/globals.css
autonomous: true

must_haves:
  truths:
    - "Student can open any page on iPhone without seeing MobileWarning blocker"
    - "Content does not overlap with iPhone notch or Dynamic Island (safe area CSS ready)"
    - "Heading sizes are proportionally smaller on mobile while maintaining clear hierarchy"
    - "Body text is readable at 16px minimum, preventing iOS auto-zoom on inputs"
  artifacts:
    - path: "web_frontend/src/components/MobileWarning.tsx"
      provides: "DELETED - must not exist"
    - path: "web_frontend/src/components/GlobalComponents.tsx"
      provides: "Clean component without MobileWarning references"
      must_not_contain: "MobileWarning"
    - path: "web_frontend/src/pages/+Head.tsx"
      provides: "Viewport meta with viewport-fit=cover"
      contains: "viewport-fit=cover"
    - path: "web_frontend/src/styles/globals.css"
      provides: "Safe area CSS vars, touch-action, typography scale"
      contains: ["--safe-top", "touch-action: manipulation", "h1", "h2", "h3"]
  key_links:
    - from: "web_frontend/src/pages/+Head.tsx"
      to: "CSS env(safe-area-inset-*)"
      via: "viewport-fit=cover enables safe area values"
      pattern: "viewport-fit=cover"
    - from: "web_frontend/src/styles/globals.css"
      to: "layout components"
      via: "CSS custom properties for safe areas"
      pattern: "--safe-top.*env\\(safe-area-inset-top"
---

<objective>
Remove the MobileWarning blocker and configure viewport foundations for mobile support.

Purpose: Enable mobile users to access the app and establish the CSS infrastructure (viewport meta, safe areas, typography) that all subsequent mobile work builds upon.

Output: MobileWarning deleted, viewport meta configured, globals.css with safe area variables and mobile typography scale.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-typography/01-CONTEXT.md
@.planning/phases/01-foundation-typography/01-RESEARCH.md
@web_frontend/src/components/MobileWarning.tsx
@web_frontend/src/components/GlobalComponents.tsx
@web_frontend/src/pages/+Head.tsx
@web_frontend/src/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove MobileWarning component completely</name>
  <files>
    web_frontend/src/components/MobileWarning.tsx
    web_frontend/src/components/GlobalComponents.tsx
  </files>
  <action>
    Delete the MobileWarning component file entirely:
    - Delete web_frontend/src/components/MobileWarning.tsx

    Clean GlobalComponents.tsx by removing ALL MobileWarning references:
    - Remove the import: `import MobileWarning from "./MobileWarning";`
    - Remove the state: `const [showMobileWarning, setShowMobileWarning] = useState(false);`
    - Remove the useEffect that checks localStorage for mobileWarningDismissed
    - Remove the handleContinueAnyway callback
    - Remove the conditional rendering: `{showMobileWarning && <MobileWarning onContinue={handleContinueAnyway} />}`

    The resulting GlobalComponents.tsx should only render CookieBanner and FeedbackButton.
    Remove unused imports (useState, useCallback, useEffect if no longer needed).
  </action>
  <verify>
    - `ls web_frontend/src/components/MobileWarning.tsx` returns "No such file"
    - `grep -r "MobileWarning" web_frontend/src/` returns no matches
    - `npm run build` in web_frontend succeeds (no import errors)
  </verify>
  <done>
    MobileWarning.tsx deleted. GlobalComponents.tsx has no MobileWarning references. Build passes.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure viewport meta and foundational mobile CSS</name>
  <files>
    web_frontend/src/pages/+Head.tsx
    web_frontend/src/styles/globals.css
  </files>
  <action>
    Update viewport meta in +Head.tsx:
    - Change: `content="width=device-width, initial-scale=1.0"`
    - To: `content="width=device-width, initial-scale=1.0, viewport-fit=cover"`

    This enables safe area insets to return non-zero values on notched devices.

    Update globals.css with foundational mobile CSS. Add these in the appropriate sections:

    1. Safe area CSS custom properties (add to :root):
    ```css
    /* Safe area insets for notched devices */
    --safe-top: env(safe-area-inset-top, 0px);
    --safe-bottom: env(safe-area-inset-bottom, 0px);
    --safe-left: env(safe-area-inset-left, 0px);
    --safe-right: env(safe-area-inset-right, 0px);
    ```

    2. Touch and text behavior (add to body or html selector):
    ```css
    html {
      touch-action: manipulation; /* Disable double-tap zoom for faster taps */
      -webkit-text-size-adjust: 100%; /* Prevent font scaling in landscape */
    }
    ```

    3. Mobile typography scale (add to @layer base):
    Use mobile-first approach with distinct scale (not proportional).
    Per CONTEXT.md: H1 shrinks more than H3, creating tighter hierarchy on mobile.

    ```css
    @layer base {
      /* Mobile-first typography scale */
      h1 { @apply text-[1.75rem] leading-tight; }     /* 28px mobile */
      h2 { @apply text-[1.5rem] leading-tight; }      /* 24px mobile */
      h3 { @apply text-[1.25rem] leading-snug; }      /* 20px mobile */
      h4 { @apply text-[1.125rem] leading-snug; }     /* 18px mobile */

      /* Desktop typography scale (640px+) */
      @media (min-width: 640px) {
        h1 { @apply text-[2.5rem]; }    /* 40px - bigger jump */
        h2 { @apply text-[2rem]; }      /* 32px */
        h3 { @apply text-[1.5rem]; }    /* 24px */
        h4 { @apply text-[1.25rem]; }   /* 20px */
      }
    }
    ```

    Note: Body text inherits browser default 16px which prevents iOS input zoom.
    Do NOT set body font-size smaller than 16px.
  </action>
  <verify>
    - `grep "viewport-fit=cover" web_frontend/src/pages/+Head.tsx` returns match
    - `grep "safe-top" web_frontend/src/styles/globals.css` returns match
    - `grep "touch-action: manipulation" web_frontend/src/styles/globals.css` returns match
    - `grep "h1.*text-\[1.75rem\]" web_frontend/src/styles/globals.css` returns match (or verify heading styles exist)
    - `npm run build` in web_frontend succeeds
  </verify>
  <done>
    Viewport meta includes viewport-fit=cover. globals.css has safe area variables, touch-action, text-size-adjust, and mobile typography scale. Build passes.
  </done>
</task>

</tasks>

<verification>
After both tasks complete:
1. `npm run build` succeeds in web_frontend/
2. `npm run lint` passes
3. No TypeScript errors
4. grep confirms:
   - No MobileWarning references anywhere
   - viewport-fit=cover in +Head.tsx
   - --safe-top, --safe-bottom, --safe-left, --safe-right in globals.css
   - touch-action: manipulation in globals.css
   - Mobile heading scale in globals.css
</verification>

<success_criteria>
- MobileWarning component deleted, no references remain
- Viewport meta enables safe area support
- CSS custom properties ready for safe area padding in subsequent phases
- Mobile typography scale establishes readable heading hierarchy
- All builds and lints pass
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-typography/01-01-SUMMARY.md`
</output>
